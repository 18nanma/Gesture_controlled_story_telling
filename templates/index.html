<html>
  <head>
    <title>Pi Video Surveillance</title>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.4/socket.io.js" integrity="sha512-aMGMvNYu8Ue4G+fHa359jcPb1u+ytAF+P2SCb+PxrjCdO3n3ZTxJ30zuH39rimUggmTwmh2u7wvQsDTHESnmfQ==" crossorigin="anonymous"></script>
      <script type="text/javascript" charset="utf-8">
          $(document).ready(function() {
              console.log()
              var socket = io();
              socket.on('connect', function() {
                  socket.emit('my_event', {data: 'I\'m connected!'});
                  console.log("comnnects")
              });
              socket.on('api_packet', function(data) {
                  const apiPacket = JSON.parse(data);
                  const logDiv = document.getElementById('log');
                  const newParagraph = document.createElement('p');
                  // set the text content of the new paragraph to the received data
                  newParagraph.textContent = apiPacket;
                  // append the new paragraph to the log div
                  logDiv.appendChild(newParagraph);
                  console.log(apiPacket)
                  // update the UI with the received data
              });
          });
      </script>
  </head>
  <body>
    <img src="{{ url_for('video_feed') }}">
    <h2>Receive:</h2>
    <div id="log"></div>
  </body>
</html>
